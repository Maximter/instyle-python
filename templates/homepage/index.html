<!DOCTYPE html>
{% load static %}
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Instyle</title>
    <link rel="stylesheet" href="{% static "css/main-page.css" %}" />
    <link rel="shortcut icon" type="image/x-icon" href="{% static "img/system/title-logo.png" %}" />
  </head>
  <body>
    <header>
      <section>
        <a href="/"><p class="logo-name">Instyle</p></a>
        <div class="header-icons">
          <a href="/"><img src="{% static 'img/system/home-fill.svg' %}" alt="Главная страница" title="Главная страница"></img></a>
          <a href="/chat"><img src="{% static 'img/system/chat-empty.svg' %}" alt="Мессенджер" title="Мессенджер"></img></a>
          <a href="/post"><img src="{% static 'img/system/add-empty.svg' %}" alt="Добавить фотографию" title="Добавить фотографию"></img></a>
          <a href="/recommendation"><img src="{% static 'img/system/compass-empty.svg' %}" alt="Рекомендуемое" title="Рекомендуемое"></img></a>
          <a href="/notification"><img src="{% static 'img/system/notification-empty.svg' %}" alt="Уведомления" title="Уведомления"></img></a>
          <a href="/user/{{user.username}}">
            {%if user.avatar%}
              <img src="{% static './img/small/avatar/{{user.id}}.png' %}" alt="{{user.name_lastname}}" title="{{user.name_lastname}}" class="user-avatar">
            {%else%}
              <img src="{% static './img/small/avatar/standard.png' %}" alt="{{user.name_lastname}}" title="{{user.name_lastname}}" class="user-avatar">
            {%endif%}
          </a>
        </div>
      </section>
    </header>

    <div id="particles-js">
      <section class="main-section" >

      </section>
    </div>
    

    <script src="//code.jquery.com/jquery-2.0.2.min.js"></script>
    <script src="{% static "js/particles.js" %}"></script>
    <script src="{% static "js/particles-start.js" %}"></script>
  <script src="{% static "js/main-page-listener.js" %}"></script>
   <script src="{% static "js/sweetalert2.all.min.js" %}"></script>
    <script>
      function like (el, id_img) {
        fetch(`post/like/${id_img}`, {
        method: "post",
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
      });
      const count = document.getElementById(`likes_${id_img}`);

      if (el.src.indexOf('notification') > -1) {
        el.src = "../img/system/liked.svg";
        count.attributes.likes.value = ++count.attributes.likes.value;
      }
      else {
        count.attributes.likes.value = --count.attributes.likes.value;
        el.src = "../img/system/notification-empty.svg";
      }
      count.innerHTML = `Отметок нравится: ${count.attributes.likes.value}`;
      }

      function copy (link) {
        navigator.clipboard.writeText(`${window.location.origin}${link}`)
          .then(() => {
             Swal.fire({
              position: 'top',
              icon: 'success',
              title: 'Ссылка на пост была скопирована',
              showConfirmButton: false,
              timer: 1000
            })
          })
          .catch(err => {
              Swal.fire({
                position: 'top',
                icon: 'error',
                title: 'Упс, что-то пошло не по плану. Сообщите об этом нам',
                showConfirmButton: false,
                timer: 2000
              })
          });
      }  
     
    </script>
  </body>
</html>